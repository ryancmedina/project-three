<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>NEO - Asteroids</title>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    
    <!-- Link to External CSS File -->
    <link href="styles.css" rel="stylesheet">
</head>
<body>

<div class="container-fluid d-flex px-0">
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">NEO - Asteroids</a>
            <div class="ms-auto">
                <a class="btn btn-primary" href="https://www.nasa.gov/stem-content/near-earth-object-program/" target="_blank">
                    NASA Near Earth Object Program
                </a>
            </div>
        </div>
    </nav>
</div>

    <!-- Main Content -->
    <div class="container-fluid d-flex justify-content-center align-items-start mt-5 pt-4">
        <!-- Sidebar with Search Box and Details -->
        <div class="sidebar">
            <h5>Search NEO ID</h5>
            <input type="text" id="searchInput" class="form-control search-box" placeholder="Search NEO ID..." autocomplete="off">
            <ul id="suggestions" class="list-group mt-2"></ul>
            <div id="detailsContainer" class="details-container mt-4">
                <h5>NEO Details</h5>
                <div id="asteroidDetails">
                    <p>Have a specific object in mind? Search the NEO ID to see the details!</p>
                </div>
            </div>
        </div>
    
        <!-- Title and Image Section -->
        <div class="title-image-section text-center mx-3">
            <h1 class="custom-title">Explore Near-Earth Objects</h1>
            <div class="image-container">
                <a href="https://www.nasa.gov/">
                    <img src="https://nssdc.gsfc.nasa.gov/image/planetary/asteroid/ida.jpg" alt="Asteroid Image" class="img-fluid">
                </a>
                <p class="image-credit">P-42964: Galileo Probe 1993-09-22</p>
                <h4>What is a NEO?</h4>
                <p>Near-Earth Objects (NEOs) are asteroids and comets that orbit the Sun and come relatively close to Earth's orbit. These objects vary in size from small meteoroids to 
                    large asteroids spanning several kilometers. Scientists are particularly interested in discovering and studying NEOs because they offer valuable insights into the early 
                    solar system, as they are remnants from its formation. Additionally, some NEOs pose potential risks to Earth, making their detection and tracking crucial for planetary defense. 
                    Observatories and space agencies use ground-based telescopes, radar imaging, and space missions to locate and monitor NEOs, tracking their orbits and predicting possible future 
                    impacts. By closely studying these objects, we can develop strategies to mitigate potential threats and even explore opportunities for resource mining in the future.</p>
            </div>
        </div>
    
        <!-- New Centered Container -->
        <div class="sidebar">
            <h5>More Information</h5>
            <p>Explore additional asteroid data and statistics.</p>
            <p><a href="#" id="diameterAnalysisBtn" class="btn btn-primary">View Diameter Analysis</a></p>
            <p><a href="diameter.html" class="btn btn-primary">Ifrah</a></p>
            <p><a href="diameter.html" class="btn btn-primary">Dotan</a></p>
            <p><a href="diameter.html" class="btn btn-primary">Ryan</a></p>
        </div>
    </div>
    

    

    <!-- JavaScript for Autofill Search and Details -->
    <script type="module">
        import neoData from './neo_data.js';

        document.addEventListener("DOMContentLoaded", () => {
            const searchInput = document.getElementById("searchInput");
            const suggestions = document.getElementById("suggestions");
            const asteroidDetails = document.getElementById("asteroidDetails");
            const searchButton = document.getElementById("searchButton");
            const diameterAnalysisBtn = document.getElementById("diameterAnalysisBtn");
            const titleImageSection = document.querySelector(".title-image-section");

            // Handle search input and show suggestions
            searchInput.addEventListener("input", function () {
                const query = this.value.toLowerCase();
                suggestions.innerHTML = "";

                if (query.length > 0) {
                    const filteredNeos = neoData.filter(neo => neo.id.toLowerCase().includes(query)).slice(0, 5);
                    filteredNeos.forEach(neo => {
                        const li = document.createElement("li");
                        li.textContent = `${neo.id} - ${neo.name}`;
                        li.classList.add("list-group-item");
                        li.addEventListener("click", function () {
                            searchInput.value = neo.id;
                            suggestions.innerHTML = "";
                            showAsteroidDetails(neo);
                        });
                        suggestions.appendChild(li);
                    });
                }
            });

            // Handle search button click event
            searchButton.addEventListener("click", function () {
                const query = searchInput.value.toLowerCase();
                suggestions.innerHTML = "";

                if (query.length > 0) {
                    const filteredNeos = neoData.filter(neo => neo.id.toLowerCase().includes(query));
                    filteredNeos.forEach(neo => {
                        const li = document.createElement("li");
                        li.textContent = `${neo.id} - ${neo.name}`;
                        li.classList.add("list-group-item");
                        li.addEventListener("click", function () {
                            searchInput.value = neo.id;
                            suggestions.innerHTML = "";
                            showAsteroidDetails(neo);
                        });
                        suggestions.appendChild(li);
                    });
                }
            });

            // Display asteroid details
            function showAsteroidDetails(neo) {
                asteroidDetails.innerHTML = `
                    <p><strong>ID:</strong> ${neo.id}</p>
                    <p><strong>Name:</strong> ${neo.name}</p>                  
                    <p><strong>Est. Diameter:</strong></p>
                    <p>${neo.estimated_diameter_km_max + neo.estimated_diameter_km_min / 2 < 1 ? (Math.round((neo.estimated_diameter_km_max + neo.estimated_diameter_km_min / 2) * 1000) + "m") : 
                    (Math.round((neo.estimated_diameter_km_max + neo.estimated_diameter_km_min / 2) * 100) / 100).toFixed(2) + "km"}</p>
                    <p><strong>Closest Approach Date:</strong></p>
                    <p>${neo.close_approach_date}</p>
                    <p><strong>Closest Approach Distance:</strong></p>
                    <p>${Math.round(parseFloat(neo.miss_distance_km ?? 0)).toLocaleString()} km</p>
                    <p><strong>Relative Velocity:</strong></p>
                    <p>${Math.round(parseFloat(neo.relative_velocity_kph ?? 0)).toLocaleString()} kph</p>
                    <p><strong>Potentially Hazardous:</strong></p>
                    <p><span style="color: ${neo.is_potentially_hazardous ? 'red' : 'green'}">${neo.is_potentially_hazardous ? 'Yes' : 'No'}</span></p>
                `;
            }
        });
    </script>

</body>
</html>
